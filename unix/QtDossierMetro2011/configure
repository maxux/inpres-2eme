#!/bin/bash
set -e

CONF="client control chemin"

for i in $CONF; do
	echo "-- Configuring $i"
	cd $i && ./configure && cd ..
done

# Generating Makefile
echo "all:" > Makefile
for i in $CONF; do
	echo "	cd $i && \$(MAKE)" >> Makefile
done

echo "clean:" >> Makefile
for i in $CONF; do
	echo "	cd $i && \$(MAKE) clean" >> Makefile
done

echo "mrproper:" >> Makefile
for i in $CONF; do
	echo "	cd $i && \$(MAKE) mrproper" >> Makefile
done

echo "	rm Makefile" >> Makefile

echo -e "\nAll done. Please make naow."
